# 学习通自动化脚本

一个基于 Playwright 的学习通课程自动化学习脚本，具备强大的反检测能力和智能学习模拟功能。

## ⚠️ 免责声明

本脚本仅供学习和研究使用，请勿用于违反学校规定或平台服务条款的行为。使用本脚本所产生的任何后果由使用者自行承担。

## 🚀 功能特性

### 核心功能
- 🤖 **自动化学习**: 自动播放视频课程，模拟真实学习行为
- 🛡️ **反检测系统**: 绕过学习通的各种检测机制
- ⏱️ **智能时长控制**: 模拟真实的学习时间和行为模式
- 🎯 **多课程支持**: 自动获取并学习多门课程
- 📊 **性能监控**: 实时监控脚本性能和内存使用

### 反检测技术
- 隐藏 Playwright 特征
- 随机用户代理和视口大小
- 模拟真实的鼠标和键盘行为
- 智能心跳检测模拟
- 页面焦点和视频播放状态监控
- 验证码自动处理提醒

### 智能学习模拟
- 真实的学习时长计算
- 随机暂停和快进行为
- 模拟笔记记录和页面滚动
- 智能休息时间安排
- 异常学习速度检测

## 📦 安装依赖

```bash
# 安装 Node.js 依赖
npm install

# 或者使用 yarn
yarn install
```

## 🔧 配置说明

### 1. 基本配置

脚本会自动启动浏览器并导航到学习通登录页面，你需要手动完成登录过程。

### 2. 选择器配置

脚本使用 `selectors-config.js` 文件来配置页面元素选择器，支持多种选择器模式以适应不同的页面结构。

### 3. 反检测配置

在 `stealth-config.js` 中可以调整反检测参数：
- 浏览器启动参数
- 用户代理池
- 视口大小范围
- 代理配置（可选）

### 4. 学习行为配置

在 `duration-controller.js` 中可以调整学习行为参数：
- 每日学习时长范围
- 单次学习时长范围
- 休息间隔时间
- 学习速度因子

## 🎮 使用方法

### 1. 启动脚本

```bash
node main.js
```

### 2. 登录流程

1. 脚本会自动打开浏览器并导航到学习通登录页面
2. 手动输入用户名和密码完成登录
3. 如遇验证码，按提示完成验证
4. 登录成功后脚本会自动开始学习流程

### 3. 自动学习

脚本会自动：
1. 获取课程列表
2. 依次进入每门课程
3. 查找视频章节
4. 模拟观看视频
5. 记录学习进度

### 4. 停止脚本

- 在终端中按 `Ctrl+C` 停止脚本
- 脚本会自动清理资源并生成性能报告

## 📁 项目结构

```
xuexitong-script/
├── main.js                    # 主程序入口
├── anti-detection.js          # 反检测模块
├── duration-controller.js     # 学习时长控制模块
├── selectors-config.js        # 页面选择器配置
├── stealth-config.js          # 隐身配置模块
├── performance-optimizer.js   # 性能优化模块
├── package.json              # 项目依赖配置
└── README.md                 # 使用说明文档
```

## 🔧 高级配置

### 自定义选择器

如果脚本无法正确识别页面元素，可以在 `selectors-config.js` 中添加新的选择器：

```javascript
// 添加新的课程卡片选择器
this.courseList.courseCards.push('.new-course-selector');

// 添加新的视频播放器选择器
this.video.videoPlayer.push('.new-video-player');
```

### 调整学习参数

在 `duration-controller.js` 中修改学习行为：

```javascript
// 调整每日学习时长（毫秒）
this.dailyStudyRange = { min: 2 * 60 * 60 * 1000, max: 6 * 60 * 60 * 1000 };

// 调整学习速度因子
this.speedFactor = { min: 0.8, max: 1.5 };
```

### 性能优化

脚本内置性能监控，会自动：
- 监控内存使用情况
- 记录操作执行时间
- 生成性能报告
- 智能重试失败操作

## 🐛 常见问题

### 1. 登录失败
- 检查网络连接
- 确认用户名密码正确
- 手动处理验证码

### 2. 找不到课程
- 检查是否已正确登录
- 确认账号有可学习的课程
- 查看控制台输出的错误信息

### 3. 视频无法播放
- 检查页面是否正确加载
- 确认视频元素存在
- 尝试手动点击播放按钮

### 4. 脚本运行缓慢
- 检查网络连接速度
- 关闭不必要的其他程序
- 查看性能监控报告

## 📊 性能监控

脚本会自动监控以下指标：
- 内存使用情况
- 页面加载时间
- 操作执行时间
- 成功/失败率
- 运行时长

在脚本结束时会生成详细的性能报告。

## 🔒 安全注意事项

1. **账号安全**: 不要在公共场所或不安全的网络环境下使用
2. **使用频率**: 避免过于频繁使用，建议间隔使用
3. **行为模拟**: 脚本已内置多种反检测机制，但仍需谨慎使用
4. **数据备份**: 重要的学习数据请及时备份

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request 来改进这个项目：

1. Fork 本项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

## 📄 许可证

本项目仅供学习和研究使用，请遵守相关法律法规和平台服务条款。

## 🆘 技术支持

如遇到技术问题，请：
1. 查看控制台输出的错误信息
2. 检查网络连接和页面加载情况
3. 尝试重启脚本
4. 提交 Issue 描述具体问题

---

**再次提醒**: 请合理使用本脚本，遵守学校规定和平台服务条款。